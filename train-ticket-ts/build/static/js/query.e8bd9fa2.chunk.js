(this["webpackJsonpmy-train-ticket-ts"]=this["webpackJsonpmy-train-ticket-ts"]||[]).push([[4],{1:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}n.d(t,"a",(function(){return r}))},10:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(3),c=n.n(i),s=n(4),o=n.n(s),l=(n(19),n(15),Object(r.memo)((function(e){var t=e.date,n=e.prev,i=e.next,s=e.isPrevDisabled,l=e.isNextDisabled,u=Object(r.useMemo)((function(){var e=o()(t);return e.format("M\u6708D\u65e5")+e.locale("zh-cn").format("ddd")}),[t]);return a.a.createElement("div",{className:"nav"},a.a.createElement("span",{onClick:n,className:c()("nav-prev",{"nav-disabled":s})},"\u524d\u4e00\u5929"),a.a.createElement("span",{className:"nav-current"},u),a.a.createElement("span",{onClick:i,className:c()("nav-next",{"nav-disabled":l})},"\u540e\u4e00\u5929"))})));t.a=l},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(1);function i(e,t,n,i){var c=Object(a.a)(e)<=Object(a.a)(),s=Object(a.a)(e)-Object(a.a)()>1728e6,o=Object(r.useCallback)((function(){c||t(n())}),[t,n,c]),l=Object(r.useCallback)((function(){s||t(i())}),[t,i,s]);return{isPrevDisabled:c,isNextDisabled:s,prev:o,next:l}}},14:function(e,t,n){},15:function(e,t,n){},20:function(e,t,n){"use strict";e.exports=function(e,t,n){if((t-=(e+="").length)<=0)return e;n||0===n||(n=" ");if(" "===(n+="")&&t<10)return r[t]+e;var a="";for(;1&t&&(a+=n),t>>=1;)n+=n;return a+e};var r=[""," ","  ","   ","    ","     ","      ","       ","        ","         "]},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(o){a=!0,i=o}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},50:function(e,t,n){e.exports=n(68)},51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),c=n.n(i),s=n(6),o=(n(18),n(2));function l(e){return{type:"SET_DEPART_DATE",payload:e}}function u(e){return{type:"SET_HIGH_SPEED",payload:e}}function d(){return function(e,t){e(u(!t().highSpeed))}}function p(){return function(e,t){e(l(t().departDate-864e5))}}function m(){return function(e,t){e(l(t().departDate+864e5))}}function T(){return function(e,t){var n=t().orderType;e({type:"SET_ORDER_TYPE",payload:"depart"===n?"duration":"depart"})}}function h(){return function(e,t){var n=t().onlyTickets;e({type:"ACTION_SET_ONLY_TICKETS",payload:!n})}}function E(e){return{type:"SET_CHECKED_TICKET_TYPES",payload:e}}function v(e){return{type:"SET_CHECKED_TRAIN_TYPES",payload:e}}function S(e){return{type:"SET_CHECKED_DEPART_STATIONS",payload:e}}function f(e){return{type:"SET_CHECKED_ARRIVE_STATIONS",payload:e}}function y(e){return function(t){console.log(e),fetch(e).then((function(e){return e.json()})).then((function(e){var n=e.dataMap.directTrainInfo,r=n.trains,a=n.filter,i=a.ticketType,c=a.trainType,s=a.depStation,o=a.arrStation;t({type:"SET_TRAIN_LIST",payload:r}),t({type:"SET_TICKET_TYPES",payload:i}),t({type:"SET_TRAIN_TYPES",payload:c}),t({type:"SET_DEPART_STATIONS",payload:s}),t(function(e){return{type:"SET_ARRIVE_STATIONS",payload:e}}(o))}))}}function b(e){return{type:"ACTION_SET_DEPART_TIME_START",payload:e}}function k(e){return{type:"SET_DEPART_TIME_END",payload:e}}function g(e){return{type:"SET_ARRIVE_TIME_START",payload:e}}function O(e){return{type:"SET_ARRIVE_TIME_END",payload:e}}function j(){return function(e,t){e({type:"SET_IS_FILTERS_VISIBLE",payload:!t().isFiltersVisible})}}var _=n(1),D={from:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_FROM":return r}return e},to:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_TO":return r}return e},departDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(_.a)(Date.now()),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_DEPART_DATE":return r}return e},highSpeed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_HIGH_SPEED":return r}return e},trainList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_TRAIN_LIST":return r}return e},orderType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"depart",t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ORDER_TYPE":return r}return e},ticketTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_TICKET_TYPES":return r}return e},checkedTicketTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_CHECKED_TICKET_TYPES":return r}return e},onlyTickets:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"ACTION_SET_ONLY_TICKETS":return r}return e},trainTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_TRAIN_TYPES":return r}return e},checkedTrainTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_CHECKED_TRAIN_TYPES":return r}return e},departStations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_DEPART_STATIONS":return r}return e},checkedDepartStations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_CHECKED_DEPART_STATIONS":return r}return e},arriveStations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ARRIVE_STATIONS":return r}return e},checkedArriveStations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_CHECKED_ARRIVE_STATIONS":return r}return e},departTimeStart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"ACTION_SET_DEPART_TIME_START":return r}return e},departTimeEnd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_DEPART_TIME_END":return r}return e},arriveTimeStart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ARRIVE_TIME_START":return r}return e},arriveTimeEnd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ARRIVE_TIME_END":return r}return e},isFiltersVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_IS_FILTERS_VISIBLE":return r}return e},searchParsed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_SEARCH_PARSED":return r}return e}},N=n(12),A=Object(o.d)(Object(o.c)(D),{from:null,to:null,departDate:Date.now(),highSpeed:!1,trainList:null,onlyTickets:!1,orderType:"depart",ticketTypes:null,checkedTicketTypes:{},trainTypes:null,checkedTrainTypes:{},departStations:null,checkedDepartStations:{},arriveStations:null,checkedArriveStations:{},departTimeStart:0,departTimeEnd:24,arriveTimeStart:0,arriveTimeEnd:24,isFiltersVisible:!1,searchParsed:!1},Object(o.a)(N.a)),C=(n(51),n(8)),I=n.n(C),R=n(7),w=n(10),P=n(11),M=(n(53),function(e){var t=e.dTime,n=e.aTime,i=e.dStation,c=e.aStation,s=e.trainNumber,o=e.date,l=e.time,u=e.priceMsg,d=Object(r.useMemo)((function(){return new I.a("ticket.html").setSearch("aStation",c).setSearch("dStation",i).setSearch("trainNumber",s).setSearch("date",o).toString()}),[c,i,s,o]);return a.a.createElement("li",{className:"list-item"},a.a.createElement("a",{href:d},a.a.createElement("span",{className:"item-time"},a.a.createElement("em",null,t),a.a.createElement("br",null),a.a.createElement("em",{className:"em-light"},n," ",a.a.createElement("i",{className:"time-after"})," ")),a.a.createElement("span",{className:"item-stations"},a.a.createElement("em",null,a.a.createElement("i",{className:"train-station train-state"},"\u59cb"),i),a.a.createElement("br",null),a.a.createElement("em",{className:"em-light"},a.a.createElement("i",{className:"train-station train-end"},"\u7ec8"),c)),a.a.createElement("span",{className:"item-train"},a.a.createElement("em",null,s),a.a.createElement("br",null),a.a.createElement("em",{className:"em-light"},l)),a.a.createElement("span",{className:"item-ticket"},a.a.createElement("em",null,u),a.a.createElement("br",null),a.a.createElement("em",{className:"em-light-orange"},"\u53ef\u62a2\u7968"))))}),H=Object(r.memo)((function(e){var t=e.list;return a.a.createElement("ul",{className:"list"},t&&t.map((function(e){return a.a.createElement(M,Object.assign({key:e.trainNumber},e))})))})),L=n(5);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=n(3),x=n.n(K),X=(n(54),n(20)),B=n.n(X);n(55);var z=Object(r.memo)((function(e){var t=e.title,n=e.currentStartHours,i=e.currentEndHours,c=e.onStartChanged,s=e.onEndChanged,o=function(){var e=Object(r.useState)(document.documentElement.clientWidth),t=Object(L.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(document.documentElement.clientHeight),c=Object(L.a)(i,2),s=c[0],o=c[1],l=function(){a(document.documentElement.clientWidth),o(document.documentElement.clientHeight)};return Object(r.useEffect)((function(){return window.addEventListener("resize",l,!1),function(){window.removeEventListener("resize",l,!1)}}),[]),{width:n,height:s}}(),l=Object(r.useRef)(null),u=Object(r.useRef)(null),d=Object(r.useRef)(0),p=Object(r.useRef)(0),m=Object(r.useRef)(null),T=Object(r.useRef)(0),h=Object(r.useRef)(n),E=Object(r.useRef)(i),v=Object(r.useState)((function(){return n/24*100})),S=Object(L.a)(v,2),f=S[0],y=S[1],b=Object(r.useState)((function(){return i/24*100})),k=Object(L.a)(b,2),g=k[0],O=k[1];h.current!==n&&(y(n/24*100),h.current=n),E.current!==i&&(O(i/24*100),E.current=i);var j=Object(r.useMemo)((function(){return f>100?100:f<0?0:(console.log(f),f)}),[f]),_=Object(r.useMemo)((function(){return g>100?100:g<0?0:g}),[g]),D=Object(r.useMemo)((function(){return Math.round(24*j/100)}),[j]),N=Object(r.useMemo)((function(){return Math.round(24*_/100)}),[_]),A=Object(r.useMemo)((function(){return B()(D,2,"0")+":00"}),[D]),C=Object(r.useMemo)((function(){return B()(N,2,"0")+":00"}),[N]);function I(e){var t=e.targetTouches[0];d.current=t.pageX}function R(e){var t=e.targetTouches[0];p.current=t.pageX}function w(e){var t=e.targetTouches[0],n=t.pageX-d.current;d.current=t.pageX,y((function(e){return e+n/T.current*100}))}function P(e){var t=e.targetTouches[0],n=t.pageX-p.current;p.current=t.pageX,O((function(e){return e+n/T.current*100}))}return Object(r.useEffect)((function(){m.current&&(T.current=parseFloat(window.getComputedStyle(m.current).width))}),[o.width]),Object(r.useEffect)((function(){if(l.current&&u.current){var e=l.current,t=u.current;return e.addEventListener("touchstart",I,!1),e.addEventListener("touchmove",w,!1),t.addEventListener("touchstart",R,!1),t.addEventListener("touchmove",P,!1),function(){e.removeEventListener("touchstart",I,!1),e.removeEventListener("touchmove",w,!1),t.removeEventListener("touchstart",R,!1),t.removeEventListener("touchmove",P,!1)}}})),Object(r.useEffect)((function(){c(D)}),[c,D]),Object(r.useEffect)((function(){s(N)}),[s,N]),a.a.createElement("div",{className:"option"},a.a.createElement("h3",null,t),a.a.createElement("div",{className:"range-slider"},a.a.createElement("div",{className:"slider",ref:m},a.a.createElement("div",{className:"slider-range",style:{left:j+"%",width:_-j+"%"}}),a.a.createElement("i",{ref:l,className:"slider-handle",style:{left:j+"%"}},a.a.createElement("span",null,A)),a.a.createElement("i",{ref:u,className:"slider-handle",style:{left:_+"%"}},a.a.createElement("span",null,C)))))}));function W(e,t){var n=t.type,r=t.payload;switch(n){case"toggle":var a=Y({},e);return a=Y({},e),r&&(r in a?delete a[r]:a[r]=!0),console.log(a),a;case"reset":return{}}return e}var G=function(e){var t=e.name,n=e.checked,r=e.value,i=e.dispatch;return a.a.createElement("li",{className:x()({checked:n}),onClick:function(){return i({payload:r,type:"toggle"})}},t)},J=function(e){var t=e.title,n=e.options,r=e.checkedMap,i=e.dispatch;return a.a.createElement("div",{className:"option"},a.a.createElement("h3",null,t),a.a.createElement("ul",null,n&&n.map((function(e){return a.a.createElement(G,Object.assign({key:e.value},e,{checked:r.hasOwnProperty(e.value),dispatch:i}))}))))},Q=function(e){var t=e.ticketTypes,n=e.trainTypes,i=e.departStations,c=e.arriveStations,s=e.checkedTicketTypes,o=e.checkedTrainTypes,l=e.checkedDepartStations,u=e.checkedArriveStations,d=e.departTimeStart,p=e.departTimeEnd,m=e.arriveTimeStart,T=e.arriveTimeEnd,h=e.setCheckedTicketTypes,E=e.setCheckedTrainTypes,v=e.setCheckedDepartStations,S=e.setCheckedArriveStations,f=e.setDepartTimeStart,y=e.setDepartTimeEnd,b=e.setArriveTimeStart,k=e.setArriveTimeEnd,g=e.toggleIsFiltersVisible,O=Object(r.useReducer)(W,s,(function(){return Y({},s)})),j=Object(L.a)(O,2),_=j[0],D=j[1],N=Object(r.useReducer)(W,o,(function(){return Y({},o)})),A=Object(L.a)(N,2),C=A[0],I=A[1],R=Object(r.useReducer)(W,l,(function(){return Y({},l)})),w=Object(L.a)(R,2),P=w[0],M=w[1],H=Object(r.useReducer)(W,u,(function(){return Y({},u)})),V=Object(L.a)(H,2),F=V[0],K=V[1],X=Object(r.useState)(d),B=Object(L.a)(X,2),G=B[0],Q=B[1],q=Object(r.useState)(p),U=Object(L.a)(q,2),Z=U[0],$=U[1],ee=Object(r.useState)(m),te=Object(L.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)(T),ie=Object(L.a)(ae,2),ce=ie[0],se=ie[1],oe=[{title:"\u5750\u5e2d\u7c7b\u578b",options:t,checkedMap:_,dispatch:D},{title:"\u8f66\u6b21\u7c7b\u578b",options:n,checkedMap:C,dispatch:I},{title:"\u51fa\u53d1\u8f66\u7ad9",options:i,checkedMap:P,dispatch:M},{title:"\u5230\u8fbe\u8f66\u7ad9",options:c,checkedMap:F,dispatch:K}];var le=Object(r.useMemo)((function(){return 0===Object.keys(_).length&&0===Object.keys(C).length&&0===Object.keys(P).length&&0===Object.keys(F).length&&0===G&&24===Z&&0===ne&&24===ce}),[_,C,P,F,G,Z,ne,ce]);return a.a.createElement("div",{className:"bottom-modal"},a.a.createElement("div",{className:"bottom-dialog"},a.a.createElement("div",{className:"bottom-dialog-content"},a.a.createElement("div",{className:"title"},a.a.createElement("span",{className:x()("reset",{disabled:le}),onClick:function(){D({type:"reset"}),I({type:"reset"}),M({type:"reset"}),K({type:"reset"}),Q(0),$(24),re(0),se(24)}},"\u91cd\u7f6e"),a.a.createElement("span",{className:"ok",onClick:function(){h(_),E(C),v(P),S(F),f(G),y(Z),b(ne),k(ce),g()}},"\u786e\u5b9a")),a.a.createElement("div",{className:"options"},oe.map((function(e){return a.a.createElement(J,Object.assign({key:e.title},e))})),a.a.createElement(z,{title:"\u51fa\u53d1\u65f6\u95f4",currentStartHours:G,currentEndHours:Z,onStartChanged:Q,onEndChanged:$}),a.a.createElement(z,{title:"\u5230\u8fbe\u65f6\u95f4",currentStartHours:ne,currentEndHours:ce,onStartChanged:re,onEndChanged:se})))))},q=Object(r.memo)((function(e){var t=e.toggleOrderType,n=e.toggleHighSpeed,i=e.toggleOnlyTickets,c=e.toggleIsFiltersVisible,s=e.highSpeed,o=e.orderType,l=e.onlyTickets,u=e.isFiltersVisible,d=e.ticketTypes,p=e.trainTypes,m=e.departStations,T=e.arriveStations,h=e.checkedTicketTypes,E=e.checkedTrainTypes,v=e.checkedDepartStations,S=e.checkedArriveStations,f=e.departTimeStart,y=e.departTimeEnd,b=e.arriveTimeStart,k=e.arriveTimeEnd,g=e.setCheckedTicketTypes,O=e.setCheckedTrainTypes,j=e.setCheckedDepartStations,_=e.setCheckedArriveStations,D=e.setDepartTimeStart,N=e.setDepartTimeEnd,A=e.setArriveTimeStart,C=e.setArriveTimeEnd,I=Object(r.useMemo)((function(){return 0===Object.keys(h).length&&0===Object.keys(E).length&&0===Object.keys(v).length&&0===Object.keys(S).length&&0===f&&24===y&&0===b&&24===k}),[h,E,v,S,f,y,b,k]);return a.a.createElement("div",{className:"bottom"},a.a.createElement("div",{className:"bottom-filters"},a.a.createElement("span",{className:"item",onClick:t},a.a.createElement("i",{className:"icon"},"\uf065"),"depart"===o?"\u51fa\u53d1 \u65e9\u2192\u665a":"\u8017\u65f6 \u77ed\u2192\u957f"),a.a.createElement("span",{className:x()("item",{"item-on":s}),onClick:n},a.a.createElement("i",{className:"icon"},s?"\uf43f":"\uf43e"),"\u53ea\u770b\u9ad8\u94c1\u52a8\u8f66"),a.a.createElement("span",{className:x()("item",{"item-on":l}),onClick:i},a.a.createElement("i",{className:"icon"},l?"\uf43d":"\uf43c"),"\u53ea\u770b\u6709\u7968"),a.a.createElement("span",{className:x()("item",{"item-on":u||!I}),onClick:c},a.a.createElement("i",{className:"icon"},I?"\uf0f7":"\uf446"),"\u7efc\u5408\u7b5b\u9009")),u&&a.a.createElement(Q,{ticketTypes:d,trainTypes:p,departStations:m,arriveStations:T,checkedTicketTypes:h,checkedTrainTypes:E,checkedDepartStations:v,checkedArriveStations:S,departTimeStart:f,departTimeEnd:y,arriveTimeStart:b,arriveTimeEnd:k,setCheckedTicketTypes:g,setCheckedTrainTypes:O,setCheckedDepartStations:j,setCheckedArriveStations:_,setDepartTimeStart:D,setDepartTimeEnd:N,setArriveTimeStart:A,setArriveTimeEnd:C,toggleIsFiltersVisible:c}))})),U=(n(56),n(4)),Z=n.n(U),$=Object(s.b)((function(e){return{to:e.to,from:e.from,departDate:e.departDate,highSpeed:e.highSpeed,searchParsed:e.searchParsed,trainList:e.trainList,orderType:e.orderType,onlyTickets:e.onlyTickets,trainTypes:e.trainTypes,ticketTypes:e.ticketTypes,departStations:e.departStations,arriveStations:e.arriveStations,isFiltersVisible:e.isFiltersVisible,checkedTicketTypes:e.checkedTicketTypes,checkedTrainTypes:e.checkedTrainTypes,checkedDepartStations:e.checkedDepartStations,checkedArriveStations:e.checkedArriveStations,departTimeStart:e.departTimeStart,departTimeEnd:e.departTimeEnd,arriveTimeStart:e.arriveTimeStart,arriveTimeEnd:e.arriveTimeEnd}}),(function(e){return{dispatch:e,fetchTrain:Object(o.b)(y,e)}}))((function(e){var t=e.to,n=e.from,i=e.departDate,c=e.highSpeed,s=e.trainList,y=e.orderType,D=e.onlyTickets,N=e.trainTypes,A=e.ticketTypes,C=e.departStations,M=e.arriveStations,L=e.searchParsed,V=e.isFiltersVisible,F=e.checkedTicketTypes,Y=e.checkedTrainTypes,K=e.checkedDepartStations,x=e.checkedArriveStations,X=e.departTimeStart,B=e.departTimeEnd,z=e.arriveTimeStart,W=e.arriveTimeEnd,G=e.fetchTrain,J=e.dispatch;Object(r.useEffect)((function(){var e={to:"",from:"",date:Date.now(),highSpeed:!1},t=Object.assign(e,I.a.parseQuery(window.location.search)),n=t.to,r=t.from,a=t.date,i=t.highSpeed;J(function(e){return{type:"SET_FROM",payload:e}}(r)),J(function(e){return{type:"SET_TO",payload:e}}(n)),J(l(Object(_.a)(Z()(a).valueOf()))),J(u(!0===i)),J({type:"SET_SEARCH_PARSED",payload:!0})}),[J]),Object(r.useEffect)((function(){if(L){var e=new I.a("http://easy-mock.liuup.com/mock/5efef790339f163501d502b7/api/train/list").setSearch("from",n||"").setSearch("to",t||"").setSearch("date",Z()(i).format("YYYY-MM-DD")||"").setSearch("orderType",y).setSearch("highSpeed",c+"").setSearch("onlyTickets",D+"").setSearch("checkedTicketTypes",Object.keys(F).join()).setSearch("checkedTrainTypes",Object.keys(Y).join()).setSearch("checkedDepartStations",Object.keys(K).join()).setSearch("checkedArriveStations",Object.keys(x).join()).toString();G(e)}}),[n,t,i,y,c,L,D,F,Y,K,x,G]);var Q=Object(r.useCallback)((function(){window.history.back()}),[]),U=Object(P.a)(i,J,p,m),$=U.isPrevDisabled,ee=U.isNextDisabled,te=U.prev,ne=U.next,re=Object(r.useMemo)((function(){return Object(o.b)({toggleOrderType:T,toggleHighSpeed:d,toggleOnlyTickets:h,toggleIsFiltersVisible:j,setCheckedTicketTypes:E,setCheckedTrainTypes:v,setCheckedDepartStations:S,setCheckedArriveStations:f,setDepartTimeStart:b,setDepartTimeEnd:k,setArriveTimeStart:g,setArriveTimeEnd:O},J)}),[J]);return L?a.a.createElement("div",null,a.a.createElement("div",{className:"header-wrapper"},a.a.createElement(R.a,{title:"".concat(n,"-").concat(t),onBack:Q})),a.a.createElement(w.a,{date:i,prev:te,next:ne,isPrevDisabled:$,isNextDisabled:ee}),a.a.createElement(H,{list:s}),a.a.createElement(q,Object.assign({highSpeed:c,orderType:y,onlyTickets:D,isFiltersVisible:V,ticketTypes:A,trainTypes:N,departStations:C,arriveStations:M,checkedTicketTypes:F,checkedTrainTypes:Y,checkedDepartStations:K,checkedArriveStations:x,departTimeStart:X,departTimeEnd:B,arriveTimeStart:z,arriveTimeEnd:W},re))):null}));c.a.render(a.a.createElement(s.a,{store:A},a.a.createElement($,null)),document.getElementById("root"))},7:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=(n(14),Object(r.memo)((function(e){var t=e.onBack,n=e.title;return a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"header-back",onClick:t},a.a.createElement("svg",{width:"42",height:"42"},a.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),a.a.createElement("h1",{className:"header-title"},n))})));t.a=i}},[[50,7,0,1]]]);
//# sourceMappingURL=query.e8bd9fa2.chunk.js.map