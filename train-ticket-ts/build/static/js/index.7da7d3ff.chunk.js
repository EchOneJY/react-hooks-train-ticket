(this["webpackJsonpmy-train-ticket-ts"]=this["webpackJsonpmy-train-ticket-ts"]||[]).push([[2],{1:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}a.d(t,"a",(function(){return n}))},14:function(e,t,a){},31:function(e,t,a){e.exports=a.p+"static/media/switch.e6009882.svg"},32:function(e,t,a){e.exports=a(69)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),i=a.n(r),l=a(6),o=(a(18),a(2));function s(e){return{type:"ACTION_SET_TO",payload:e}}function u(e){return{type:"ACTION_SET_FROM",payload:e}}function m(){return function(e,t){var a=t(),n=a.to;e(s(a.from)),e(u(n))}}function d(e){return{type:"ACTION_SET_SEARCH_KEY",payload:e}}function h(e){return function(t){t(function(e){return{type:"ACTION_SET_CITY_SELECTOR_VISIBLE",payload:e}}(!0)),t(function(e){return{type:"ACTION_SET_SELECTING_LEFT_CITY",payload:e}}(e))}}function E(){return{type:"ACTION_SET_CITY_SELECTOR_VISIBLE",payload:!1}}function y(e){return function(t,a){t(a().currentSelectingLeftCity?u(e):s(e)),t({type:"ACTION_SET_CITY_SELECTOR_VISIBLE",payload:!1})}}function f(e){return{type:"ACTION_SET_CITY_DATA",payload:e}}function p(e){return{type:"ACTION_SET_IS_LOADING_CITY_DATA",payload:e}}function S(){return function(e,t){if(!t().isLoadingCityData){var a=JSON.parse(localStorage.getItem("city_data_cache")||"{}");Date.now()<a.expires?e(f(a.data)):(e(p(!0)),fetch("http://easy-mock.liuup.com/mock/5efef790339f163501d502b7/api/cities").then((function(e){return e.json()})).then((function(t){e(f(t.cityList)),localStorage.setItem("city_data_cache",JSON.stringify({expires:Date.now()+6e4,data:t.cityList})),e(p(!1))})).catch((function(){e(p(!1))})))}}}function g(){return{type:"ACTION_SET_DATE_SELECTOR_VISIBLE",payload:!0}}function T(){return{type:"ACTION_SET_DATE_SELECTOR_VISIBLE",payload:!1}}function v(e){return{type:"ACTION_SET_HIGH_SPEED",payload:e}}var _={to:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u5317\u4eac",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_TO":return n}return e},from:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u4e0a\u6d77",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_FROM":return n}return e},searchKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_SEARCH_KEY":return n}return e},currentSelectingLeftCity:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_SELECTING_LEFT_CITY":return n}return e},isCitySelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_CITY_SELECTOR_VISIBLE":return n}return e},isLoadingCityData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_IS_LOADING_CITY_DATA":return n}return e},cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_CITY_DATA":return n}return e},departDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_DEPART_DATE":return n}return e},isDateSelectorVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_DATE_SELECTOR_VISIBLE":return n}return e},highSpeed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ACTION_SET_HIGH_SPEED":return n}return e}},C=a(12),O=Object(o.d)(Object(o.c)(_),{from:"\u5317\u4eac",to:"\u4e0a\u6d77",searchKey:"",cityData:null,isCitySelectorVisible:!1,currentSelectingLeftCity:!1,isLoadingCityData:!1,departDate:Date.now(),isDateSelectorVisible:!1,highSpeed:!1},Object(o.a)(C.a)),b=(a(42),a(43),a(7)),N=a(3),D=a.n(N),I=(a(44),function(e){var t=e.name,a=e.onSelect;return c.a.createElement("li",{className:"city-li",onClick:function(){return a(t)}},t)}),w=function(e){var t=e.title,a=e.citys,n=void 0===a?[]:a,r=e.onSelect;return c.a.createElement("ul",{className:"city-ul"},c.a.createElement("li",{className:"city-li","data-cate":t},t),n.map((function(e){return c.a.createElement(I,{key:e.name,name:e.name,onSelect:r})})))},k=Object(n.memo)((function(e){var t=e.sections,a=e.onSelect;return c.a.createElement("div",{className:"city-list"},c.a.createElement("div",{className:"city-cate"},t&&t.map((function(e){return c.a.createElement(w,{key:e.title,title:e.title,citys:e.citys,onSelect:a})}))))})),A=Object(n.memo)((function(e){var t=e.show,a=e.cityData,r=e.searchKey,i=e.loading,l=e.onBack,o=e.onSelect,s=e.setSearchKey,u=e.fetchCityData;Object(n.useEffect)((function(){!t||a||i||u()}),[t,a,i,u]);var m=Object(n.useMemo)((function(){return r.trim()}),[r]);return c.a.createElement("div",{className:D()("city-selector",{hidden:!t})},c.a.createElement("div",{className:"city-search"},c.a.createElement("div",{className:"search-back",onClick:function(){return l()}},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("div",{className:"search-input-wrapper"},c.a.createElement("input",{type:"text",value:r,className:"search-input",placeholder:"\u57ce\u5e02\u3001\u8f66\u7ad9\u7684\u4e2d\u6587\u6216\u62fc\u97f3",onChange:function(e){return s(e.target.value)}})),c.a.createElement("i",{className:D()("search-clean",{hidden:0===m.length}),onClick:function(){return s("")}},"\uf063")),i?c.a.createElement("div",null,"Loading"):a?c.a.createElement(k,{sections:a,onSelect:o}):c.a.createElement("div",null,"error"))})),j=a(1),L=(a(45),function(e){var t=e.day,a=e.onSelect;if(!t)return c.a.createElement("td",{className:"null"});var n=[],r=Object(j.a)();t<r&&n.push("disabled"),[6,0].includes(new Date(t).getDay())&&n.push("weekend");var i=r===t?"\u4eca\u5929":new Date(t).getDate();return c.a.createElement("td",{className:D()(n),onClick:function(){return a(t)}},i)}),M=function(e){var t=e.days,a=e.onSelect;return c.a.createElement("tr",{className:"date-table-days"},t.map((function(e,t){return c.a.createElement(L,{key:t,day:e,onSelect:a})})))},V=function(e){for(var t=e.startTimeInMonth,a=e.onSelect,n=new Date(t),r=new Date(t),i=[];r.getMonth()===n.getMonth();)i.push(r.getTime()),r.setDate(r.getDate()+1);i=new Array(n.getDay()?n.getDay()-1:6).fill(null).concat(i);var l=new Date(i[i.length-1]);i=i.concat(new Array(l.getDay()?7-l.getDay():0).fill(null));for(var o=[],s=0;s<i.length/7;s++){var u=i.slice(7*s,7*(s+1));o.push(u)}return c.a.createElement("table",{className:"date-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:7},c.a.createElement("h5",null,n.getFullYear(),"\u5e74",n.getMonth(),"\u6708")))),c.a.createElement("tbody",null,c.a.createElement("tr",{className:"date-table-weeks"},c.a.createElement("th",null,"\u5468\u4e00"),c.a.createElement("th",null,"\u5468\u4e8c"),c.a.createElement("th",null,"\u5468\u4e09"),c.a.createElement("th",null,"\u5468\u56db"),c.a.createElement("th",null,"\u5468\u4e94"),c.a.createElement("th",{className:"weekend"},"\u5468\u516d"),c.a.createElement("th",{className:"weekend"},"\u5468\u5929")),o.map((function(e,t){return c.a.createElement(M,{key:t,days:e,onSelect:a})}))))},Y=function(e){var t=e.show,a=e.onSelect,n=e.onBack,r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),r.setDate(1);var i=[r.getTime()];return r.setMonth(r.getMonth()+1),i.push(r.getTime()),r.setMonth(r.getMonth()+1),i.push(r.getTime()),c.a.createElement("div",{className:D()("date-selector",{hidden:!t})},c.a.createElement(b.a,{title:"\u65e5\u671f\u9009\u62e9",onBack:n}),c.a.createElement("div",{className:"date-selector-tables"},i.map((function(e,t){return c.a.createElement(V,{startTimeInMonth:e,key:t,onSelect:a})}))))},B=a(31),R=a.n(B),K=(a(46),Object(n.memo)((function(e){var t=e.to,a=e.from,n=e.exchangeFromTo,r=e.showCitySelector;return c.a.createElement("div",{className:"journey"},c.a.createElement("div",{className:"journey-station"},c.a.createElement("input",{type:"text",readOnly:!0,name:"from",value:a,className:"journey-input journey-from",onClick:function(){return r(!0)}})),c.a.createElement("div",{className:"journey-switch",onClick:function(){return n()}},c.a.createElement("img",{src:R.a,width:"70",height:"40",alt:""})),c.a.createElement("div",{className:"journey-station"},c.a.createElement("input",{type:"text",readOnly:!0,name:"to",value:t,className:"journey-input journey-to",onClick:function(){return r(!1)}})))}))),x=a(4),H=a.n(x),F=(a(47),Object(n.memo)((function(e){var t=e.time,a=e.onClick,n=Object(j.a)(t),r=new Date(n),i=H()(n).format("YYYY-MM-DD"),l=n===Object(j.a)(),o="\u5468"+["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"][r.getDay()]+(l?"\u4eca\u5929":"");return c.a.createElement("div",{className:"depart-date",onClick:function(){return a(!0)}},c.a.createElement("input",{type:"hidden",name:"date",value:i}),i,c.a.createElement("span",{className:"depart-week"},o))}))),G=(a(48),Object(n.memo)((function(e){var t=e.highSpeed,a=e.toggle;return c.a.createElement("div",{className:"high-speed"},c.a.createElement("div",{className:"high-speed-label"},"\u53ea\u770b\u9ad8\u94c1/\u52a8\u8f66"),c.a.createElement("div",{className:"high-speed-switch",onClick:function(){return a(!t)}},c.a.createElement("input",{type:"hidden",name:"highSpeed",value:t+""}),c.a.createElement("div",{className:D()("high-speed-track",{checked:t})},c.a.createElement("span",{className:D()("high-speed-handle",{checked:t})}))))}))),J=(a(49),Object(n.memo)((function(){return c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"submit-button"},"\u641c\u7d22"))}))),P=Object(l.b)((function(e){return{to:e.to,from:e.from,searchKey:e.searchKey,isCitySelectorVisible:e.isCitySelectorVisible,cityData:e.cityData,isLoadingCityData:e.isLoadingCityData,departDate:e.departDate,isDateSelectorVisible:e.isDateSelectorVisible,highSpeed:e.highSpeed}}),(function(e){return{dispatch:e}}))((function(e){var t=e.to,a=e.from,r=e.isCitySelectorVisible,i=e.searchKey,l=e.cityData,s=e.isLoadingCityData,u=e.departDate,f=e.isDateSelectorVisible,p=e.highSpeed,_=e.dispatch,C=Object(n.useCallback)((function(){window.history.back()}),[]),O=Object(n.useMemo)((function(){return Object(o.b)({exchangeFromTo:m,showCitySelector:h},_)}),[_]),N=Object(n.useMemo)((function(){return Object(o.b)({onBack:E,fetchCityData:S,onSelect:y,setSearchKey:d},_)}),[_]),D=Object(n.useMemo)((function(){return Object(o.b)({toggle:v},_)}),[_]),I=Object(n.useMemo)((function(){return Object(o.b)({onClick:g},_)}),[_]),w=Object(n.useMemo)((function(){return Object(o.b)({onBack:T},_)}),[_]),k=Object(n.useCallback)((function(e){!e||e<Object(j.a)()||(_(function(e){return{type:"ACTION_SET_DEPART_DATE",payload:e}}(e)),_({type:"ACTION_SET_DATE_SELECTOR_VISIBLE",payload:!1}))}),[_]);return c.a.createElement("div",null,c.a.createElement("div",{className:"header-wrapper"},c.a.createElement(b.a,{title:"\u706b\u8f66\u7968",onBack:C})),c.a.createElement("form",{action:"query.html",className:"form"},c.a.createElement(K,Object.assign({to:t,from:a},O)),c.a.createElement(F,Object.assign({time:u},I)),c.a.createElement(G,Object.assign({highSpeed:p},D)),c.a.createElement(J,null)),r&&c.a.createElement(A,Object.assign({show:r,searchKey:i,cityData:l,loading:s},N)),f&&c.a.createElement(Y,Object.assign({show:f,onSelect:k},w)))}));i.a.render(c.a.createElement(l.a,{store:O},c.a.createElement(P,null)),document.getElementById("root"))},7:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=(a(14),Object(n.memo)((function(e){var t=e.onBack,a=e.title;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-back",onClick:t},c.a.createElement("svg",{width:"42",height:"42"},c.a.createElement("polyline",{points:"25,13 16,21 25,29",stroke:"#fff",strokeWidth:"2",fill:"none"}))),c.a.createElement("h1",{className:"header-title"},a))})));t.a=r}},[[32,5,0]]]);
//# sourceMappingURL=index.7da7d3ff.chunk.js.map