{"version":3,"sources":["common/utils.js","common/Nav.tsx","common/useNav.ts","common/Detail.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","common/Header.tsx","ticket/store/actions.ts","ticket/store/reducers.ts","ticket/store/store.ts","ticket/context.ts","ticket/components/Candidate.tsx","ticket/App.tsx","ticket/index.tsx"],"names":["timeZero","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","Nav","memo","props","date","prev","next","isPrevDisabled","isNextDisabled","currentString","useMemo","d","dayjs","format","locale","className","onClick","classNames","useNav","departDate","dispatch","prevDate","nextDate","useCallback","Detail","departStation","departTimeStr","trainNumber","durationStr","arriveStation","arriveTimeStr","arriveDate","departDateStr","arriveDateStr","children","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","done","push","value","length","err","unsupportedIterableToArray","TypeError","Header","onBack","title","width","height","points","stroke","strokeWidth","fill","setDepartDate","type","payload","fetchTicketInfo","url","fetch","then","res","json","detail","candidates","time","setArriveTimeStr","setDurationTimeStr","getState","toggleScheduleVisible","bool","state","action","tickets","isScheduleVisible","searchParsed","createStore","combineReducers","reducers","applyMiddleware","thunk","defaultValue","TrainContext","createContext","Channel","name","desc","useContext","src","URI","setSearch","toString","href","Seat","priceMsg","ticketsLeft","channels","expanded","onToggle","idx","style","map","channel","key","Candidate","useState","expandIndex","setExpandIndex","ticket","Schedule","lazy","connect","fetchInfo","bindActionCreators","window","history","back","useEffect","queriesDefault","dStation","aStation","queries","assign","parseQuery","location","search","station","setArriveStation","valueOf","document","Provider","fallback","ReactDOM","render","store","getElementById"],"mappings":"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","file":"static/js/ticket.a0feb15b.chunk.js","sourcesContent":["export function timeZero(timestamp = Date.now()) {\r\n  const target = new Date(timestamp)\r\n\r\n  target.setHours(0)\r\n  target.setMinutes(0)\r\n  target.setSeconds(0)\r\n  target.setMilliseconds(0)\r\n\r\n  return target.getTime()\r\n}\r\n","import React, { FC, memo, useMemo } from 'react'\r\nimport classNames from 'classnames'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\nimport './styles/Nav.css'\r\nimport { DepartDateProp } from '../query/types'\r\n\r\ninterface NavProps {\r\n  date: DepartDateProp\r\n  prev: () => void\r\n  next: () => void\r\n  isPrevDisabled: boolean\r\n  isNextDisabled: boolean\r\n}\r\n\r\nconst Nav: FC<NavProps> = memo(props => {\r\n  const { date, prev, next, isPrevDisabled, isNextDisabled } = props\r\n  const currentString = useMemo(() => {\r\n    const d = dayjs(date)\r\n    return d.format('M月D日') + d.locale('zh-cn').format('ddd')\r\n  }, [date])\r\n\r\n  return (\r\n    <div className=\"nav\">\r\n      <span\r\n        onClick={prev}\r\n        className={classNames('nav-prev', { 'nav-disabled': isPrevDisabled })}\r\n      >\r\n        前一天\r\n      </span>\r\n      <span className=\"nav-current\">{currentString}</span>\r\n      <span\r\n        onClick={next}\r\n        className={classNames('nav-next', { 'nav-disabled': isNextDisabled })}\r\n      >\r\n        后一天\r\n      </span>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Nav\r\n","import { useCallback } from 'react'\r\nimport { Dispatch } from 'redux'\r\nimport { timeZero } from './utils'\r\nimport { DepartDateProp } from '../query/types'\r\n\r\nexport default function useNav(\r\n  departDate: DepartDateProp,\r\n  dispatch: Dispatch,\r\n  prevDate: any,\r\n  nextDate: any\r\n) {\r\n  const isPrevDisabled = timeZero(departDate) <= timeZero()\r\n  const isNextDisabled =\r\n    timeZero(departDate) - timeZero() > 20 * 24 * 60 * 60 * 1000\r\n\r\n  const prev = useCallback(() => {\r\n    if (isPrevDisabled) return\r\n    dispatch(prevDate())\r\n  }, [dispatch, prevDate, isPrevDisabled])\r\n\r\n  const next = useCallback(() => {\r\n    if (isNextDisabled) return\r\n    dispatch(nextDate())\r\n  }, [dispatch, nextDate, isNextDisabled])\r\n\r\n  return {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next\r\n  }\r\n}\r\n","import React, { FC, memo, useMemo } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport './styles/Detail.css'\r\n\r\nimport {\r\n  StationProp,\r\n  TimeStrProp,\r\n  DateProp,\r\n  TrainNumberProp\r\n} from '../ticket/types'\r\n\r\nfunction format(d: DateProp) {\r\n  const date = dayjs(d)\r\n\r\n  return date.format('MM-DD') + ' ' + date.locale('zh-cn').format('ddd')\r\n}\r\n\r\ninterface DetailProps {\r\n  trainNumber: TrainNumberProp\r\n  departDate: DateProp\r\n  arriveDate: DateProp\r\n  departStation: StationProp\r\n  arriveStation: StationProp\r\n  departTimeStr: TimeStrProp\r\n  durationStr: TimeStrProp\r\n  arriveTimeStr: TimeStrProp\r\n}\r\n\r\nconst Detail: FC<DetailProps> = memo(props => {\r\n  const {\r\n    departStation,\r\n    departTimeStr,\r\n    departDate,\r\n    trainNumber,\r\n    durationStr,\r\n    arriveStation,\r\n    arriveTimeStr,\r\n    arriveDate\r\n  } = props\r\n\r\n  const departDateStr = useMemo(() => format(departDate), [departDate])\r\n  const arriveDateStr = useMemo(() => format(arriveDate), [arriveDate])\r\n\r\n  return (\r\n    <div className=\"detail\">\r\n      <div className=\"content\">\r\n        <div className=\"left\">\r\n          <p className=\"city\">{departStation}</p>\r\n          <p className=\"time\">{departTimeStr}</p>\r\n          <p className=\"date\">{departDateStr}</p>\r\n        </div>\r\n        <div className=\"middle\">\r\n          <p className=\"train-name\">{trainNumber}</p>\r\n          <p className=\"train-mid\">{props.children}</p>\r\n          <p className=\"train-time\">耗时{durationStr}</p>\r\n        </div>\r\n        <div className=\"right\">\r\n          <p className=\"city\">{arriveStation}</p>\r\n          <p className=\"time\">{arriveTimeStr}</p>\r\n          <p className=\"date\">{arriveDateStr}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Detail\r\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { FC, memo } from 'react'\r\nimport './styles/Header.css'\r\n\r\ninterface HeaderProps {\r\n  onBack: () => void\r\n  title: string\r\n}\r\nconst Header: FC<HeaderProps> = memo(props => {\r\n  const { onBack, title } = props\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-back\" onClick={onBack}>\r\n        <svg width=\"42\" height=\"42\">\r\n          <polyline\r\n            points=\"25,13 16,21 25,29\"\r\n            stroke=\"#fff\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <h1 className=\"header-title\">{title}</h1>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Header\r\n","import { timeZero } from '../../common/utils'\r\nimport { Dispatch } from 'redux'\r\n\r\nimport {\r\n  TrainNumberProp,\r\n  DateProp,\r\n  StationProp,\r\n  TimeStrProp,\r\n  VisibleProp,\r\n  TicketsProps\r\n} from '../types'\r\n\r\nexport const ACTION_SET_TRAIN_NUMBER = 'ACTION_SET_TRAIN_NUMBER'\r\nexport const ACTION_SET_DEPART_DATE = 'ACTION_SET_DEPART_DATE'\r\nexport const ACTION_SET_ARRIVE_DATE = 'ACTION_SET_ARRIVE_DATE'\r\nexport const ACTION_SET_DEPART_STATION = 'ACTION_SET_DEPART_STATION'\r\nexport const ACTION_SET_ARRIVE_STATION = 'ACTION_SET_ARRIVE_STATION'\r\nexport const ACTION_SET_DEPART_TIME = 'ACTION_SET_DEPART_TIME'\r\nexport const ACTION_SET_ARRIVE_TIME = 'ACTION_SET_ARRIVE_TIME'\r\nexport const ACTION_SET_DURATION = 'ACTION_SET_DURATION'\r\nexport const ACTION_SET_SEARCH_PARSED = 'ACTION_SET_SEARCH_PARSED'\r\nexport const ACTION_TOGGLE_SCHEDULE_VISIBLE = 'ACTION_TOGGLE_SCHEDULE_VISIBLE'\r\nexport const ACTION_SET_TICKETS = 'ACTION_SET_TICKETS'\r\n\r\nexport function setTrainNumber(number: TrainNumberProp) {\r\n  return {\r\n    type: ACTION_SET_TRAIN_NUMBER,\r\n    payload: number\r\n  }\r\n}\r\n\r\nexport function setDepartDate(date: DateProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_DATE,\r\n    payload: date\r\n  }\r\n}\r\n\r\nexport function setDepartStation(station: StationProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_STATION,\r\n    payload: station\r\n  }\r\n}\r\n\r\nexport function setArriveStation(station: StationProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_STATION,\r\n    payload: station\r\n  }\r\n}\r\n\r\nexport function setArriveDate(date: DateProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_DATE,\r\n    payload: date\r\n  }\r\n}\r\n\r\nexport function setDepartTimeStr(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_TIME,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setArriveTimeStr(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_TIME,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setDurationTimeStr(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_DURATION,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setTickets(tickets: TicketsProps) {\r\n  return {\r\n    type: ACTION_SET_TICKETS,\r\n    payload: tickets\r\n  }\r\n}\r\n\r\nexport function fetchTicketInfo(url: string) {\r\n  return (dispatch: Dispatch) => {\r\n    fetch(url)\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        const { detail, candidates } = res\r\n\r\n        const { departTimeStr, durationStr, arriveTimeStr, arriveDate } = detail\r\n\r\n        dispatch(setDepartTimeStr(departTimeStr))\r\n        dispatch(setArriveDate(arriveDate))\r\n        dispatch(setArriveTimeStr(arriveTimeStr))\r\n        dispatch(setDurationTimeStr(durationStr))\r\n        dispatch(setTickets(candidates))\r\n      })\r\n  }\r\n}\r\n\r\nexport function nextDate() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { departDate } = getState()\r\n\r\n    dispatch(setDepartDate(timeZero(departDate) + 86400 * 1000))\r\n  }\r\n}\r\n\r\nexport function prevDate() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { departDate } = getState()\r\n\r\n    dispatch(setDepartDate(timeZero(departDate) - 86400 * 1000))\r\n  }\r\n}\r\n\r\nexport function toggleScheduleVisible(bool: VisibleProp) {\r\n  return {\r\n    type: ACTION_TOGGLE_SCHEDULE_VISIBLE,\r\n    payload: bool\r\n  }\r\n}\r\n\r\nexport function setSearchParsed(bool: VisibleProp) {\r\n  return {\r\n    type: ACTION_SET_SEARCH_PARSED,\r\n    payload: bool\r\n  }\r\n}\r\n","import {\r\n  ACTION_SET_TRAIN_NUMBER,\r\n  ACTION_SET_DEPART_DATE,\r\n  ACTION_SET_ARRIVE_DATE,\r\n  ACTION_SET_SEARCH_PARSED,\r\n  ACTION_SET_DEPART_STATION,\r\n  ACTION_SET_ARRIVE_STATION,\r\n  ACTION_SET_DEPART_TIME,\r\n  ACTION_SET_ARRIVE_TIME,\r\n  ACTION_SET_DURATION,\r\n  ACTION_TOGGLE_SCHEDULE_VISIBLE,\r\n  ACTION_SET_TICKETS\r\n} from './actions'\r\n\r\nimport {\r\n  TrainNumberProp,\r\n  ActionProps,\r\n  DateProp,\r\n  StationProp,\r\n  TimeStrProp,\r\n  VisibleProp,\r\n  TicketsProps\r\n} from '../types'\r\n\r\nexport default {\r\n  trainNumber(\r\n    state: TrainNumberProp = null,\r\n    action: ActionProps<TrainNumberProp>\r\n  ) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_TRAIN_NUMBER:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  departDate(state: DateProp = Date.now(), action: ActionProps<DateProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  arriveDate(state: DateProp = Date.now(), action: ActionProps<DateProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  departStation(state: StationProp = null, action: ActionProps<StationProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  arriveStation(state: StationProp = null, action: ActionProps<StationProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  departTimeStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_TIME:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  arriveTimeStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_TIME:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  durationStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DURATION:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  tickets(state: TicketsProps = [], action: ActionProps<TicketsProps>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_TICKETS:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  isScheduleVisible(\r\n    state: VisibleProp = false,\r\n    action: ActionProps<VisibleProp>\r\n  ) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_TOGGLE_SCHEDULE_VISIBLE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  searchParsed(state: VisibleProp = false, action: ActionProps<VisibleProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_SEARCH_PARSED:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  }\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\n\r\nimport reducers from './reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nexport default createStore(\r\n  combineReducers(reducers),\r\n  {\r\n    trainNumber: null,\r\n    departDate: Date.now(),\r\n    arriveDate: Date.now(),\r\n    departStation: null,\r\n    arriveStation: null,\r\n    departTimeStr: null,\r\n    arriveTimeStr: null,\r\n    durationStr: null,\r\n    tickets: [],\r\n    searchParsed: false,\r\n    isScheduleVisible: false\r\n  },\r\n  applyMiddleware(thunk)\r\n)\r\n","import { createContext } from 'react'\r\n\r\nimport { TrainNumberProp, StationProp, DateProp } from './types'\r\n\r\ninterface DProp {\r\n  trainNumber: TrainNumberProp\r\n  departStation: StationProp\r\n  arriveStation: StationProp\r\n  departDate: DateProp\r\n}\r\nconst defaultValue: DProp = {\r\n  trainNumber: null,\r\n  departStation: null,\r\n  arriveStation: null,\r\n  departDate: Date.now()\r\n}\r\n\r\nexport const TrainContext = createContext(defaultValue)\r\n","import React, {\r\n  FC,\r\n  memo,\r\n  useState,\r\n  useCallback,\r\n  useMemo,\r\n  useContext\r\n} from 'react'\r\nimport URI from 'urijs'\r\nimport dayjs from 'dayjs'\r\n\r\nimport { TicketsProps, ChannelProp } from '../types'\r\nimport { TrainContext } from '../context'\r\n\r\nimport '../styles/Candidate.css'\r\n\r\ninterface ChannelProps {\r\n  name: string\r\n  desc: string\r\n  type: string\r\n}\r\n\r\nconst Channel: FC<ChannelProps> = props => {\r\n  const { name, desc, type } = props\r\n\r\n  const { trainNumber, departStation, arriveStation, departDate } = useContext(\r\n    TrainContext\r\n  )\r\n\r\n  const src = useMemo(() => {\r\n    return new URI('order.html')\r\n      .setSearch('trainNumber', trainNumber + '')\r\n      .setSearch('dStation', departStation + '')\r\n      .setSearch('aStation', arriveStation + '')\r\n      .setSearch('type', type)\r\n      .setSearch('date', dayjs(departDate).format('YYYY-MM-DD'))\r\n      .toString()\r\n  }, [type, trainNumber, departStation, arriveStation, departDate])\r\n\r\n  return (\r\n    <div className=\"channel\">\r\n      <div className=\"middle\">\r\n        <div className=\"name\">{name}</div>\r\n        <div className=\"desc\">{desc}</div>\r\n      </div>\r\n      <a href={src} className=\"buy-wrapper\">\r\n        <div className=\"buy\">买票</div>\r\n      </a>\r\n    </div>\r\n  )\r\n}\r\n\r\ninterface SeatProps {\r\n  type: string\r\n  priceMsg: string\r\n  ticketsLeft: string\r\n  channels: ChannelProp[]\r\n  expanded: boolean\r\n  onToggle: (idx: number) => void\r\n  idx: number\r\n}\r\n\r\nconst Seat: FC<SeatProps> = props => {\r\n  const {\r\n    type,\r\n    priceMsg,\r\n    ticketsLeft,\r\n    channels,\r\n    expanded,\r\n    onToggle,\r\n    idx\r\n  } = props\r\n\r\n  return (\r\n    <li>\r\n      <div className=\"bar\" onClick={() => onToggle(idx)}>\r\n        <span className=\"seat\">{type}</span>\r\n        <span className=\"price\">\r\n          <i>￥</i>\r\n          {priceMsg}\r\n        </span>\r\n        <span className=\"btn\">{expanded ? '收起' : '预定'}</span>\r\n        <span className=\"num\">{ticketsLeft}</span>\r\n      </div>\r\n      <div\r\n        className=\"channels\"\r\n        style={{ height: expanded ? channels.length * 55 + 'px' : 0 }}\r\n      >\r\n        {channels.map(channel => {\r\n          return <Channel key={channel.name} {...channel} type={type} />\r\n        })}\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\ninterface CandidateProps {\r\n  tickets: TicketsProps\r\n}\r\n\r\nconst Candidate: FC<CandidateProps> = memo(props => {\r\n  const { tickets } = props\r\n\r\n  const [expandIndex, setExpandIndex] = useState(-1)\r\n\r\n  const onToggle = useCallback(\r\n    idx => {\r\n      setExpandIndex(idx === expandIndex ? -1 : idx)\r\n    },\r\n    [expandIndex]\r\n  )\r\n\r\n  return (\r\n    <div className=\"candidate\">\r\n      <ul>\r\n        {tickets.map((ticket, idx) => {\r\n          return (\r\n            <Seat\r\n              idx={idx}\r\n              onToggle={onToggle}\r\n              expanded={expandIndex === idx}\r\n              key={ticket.type}\r\n              {...ticket}\r\n            />\r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Candidate\r\n","import React, { FC, useEffect, useCallback, lazy, Suspense } from 'react'\r\nimport { Dispatch, bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\n\r\nimport URI from 'urijs'\r\nimport dayjs from 'dayjs'\r\n\r\nimport { timeZero } from '../common/utils'\r\nimport './styles/App.css'\r\n\r\nimport Header from '../common/Header'\r\nimport Nav from '../common/Nav'\r\nimport useNav from '../common/useNav'\r\nimport Detail from '../common/Detail'\r\nimport Candidate from './components/Candidate'\r\n\r\nimport { TrainContext } from './context'\r\n\r\nimport {\r\n  TrainNumberProp,\r\n  DateProp,\r\n  StationProp,\r\n  TimeStrProp,\r\n  VisibleProp,\r\n  TicketsProps,\r\n  StoreState\r\n} from './types'\r\n\r\nimport {\r\n  prevDate,\r\n  nextDate,\r\n  setTrainNumber,\r\n  setDepartStation,\r\n  setArriveStation,\r\n  setDepartDate,\r\n  setSearchParsed,\r\n  toggleScheduleVisible,\r\n  fetchTicketInfo\r\n} from './store/actions'\r\n\r\ninterface QueryProps {\r\n  trainNumber: TrainNumberProp\r\n  dStation: StationProp\r\n  aStation: StationProp\r\n  date: DateProp\r\n}\r\n\r\ninterface AppProps {\r\n  trainNumber: TrainNumberProp\r\n  departDate: DateProp\r\n  arriveDate: DateProp\r\n  departStation: StationProp\r\n  arriveStation: StationProp\r\n  departTimeStr: TimeStrProp\r\n  arriveTimeStr: TimeStrProp\r\n  durationStr: TimeStrProp\r\n  tickets: TicketsProps\r\n  isScheduleVisible: VisibleProp\r\n  searchParsed: VisibleProp\r\n  fetchInfo: (url: string) => (dispatch: Dispatch, getState?: any) => void\r\n  dispatch: Dispatch\r\n}\r\n\r\nconst Schedule = lazy(() => import('./components/Schedule'))\r\n\r\nconst App: FC<AppProps> = props => {\r\n  const {\r\n    trainNumber,\r\n    departDate,\r\n    arriveDate,\r\n    departStation,\r\n    arriveStation,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    durationStr,\r\n    tickets,\r\n    isScheduleVisible,\r\n    searchParsed,\r\n\r\n    fetchInfo,\r\n    dispatch\r\n  } = props\r\n\r\n  const onBack = useCallback(() => {\r\n    window.history.back()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const queriesDefault = {\r\n      trainNumber: null,\r\n      dStation: null,\r\n      aStation: null,\r\n      date: Date.now()\r\n    }\r\n    const queries: QueryProps = Object.assign(\r\n      queriesDefault,\r\n      URI.parseQuery(window.location.search)\r\n    )\r\n    const { trainNumber, dStation, aStation, date } = queries\r\n\r\n    dispatch(setTrainNumber(trainNumber))\r\n    dispatch(setDepartStation(dStation))\r\n    dispatch(setArriveStation(aStation))\r\n    dispatch(setDepartDate(timeZero(dayjs(date).valueOf())))\r\n\r\n    dispatch(setSearchParsed(true))\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    document.title = trainNumber + ''\r\n  }, [trainNumber])\r\n\r\n  useEffect(() => {\r\n    if (!searchParsed) return\r\n\r\n    const url = new URI(\r\n      'http://easy-mock.liuup.com/mock/5efef790339f163501d502b7/api/ticket/detail'\r\n    )\r\n      .setSearch('date', dayjs(departDate).format('YYYY-MM-DD'))\r\n      .setSearch('trainNumber', trainNumber + '')\r\n      .toString()\r\n\r\n    fetchInfo(url)\r\n  }, [searchParsed, departDate, trainNumber, dispatch, fetchInfo])\r\n\r\n  const { isPrevDisabled, isNextDisabled, prev, next } = useNav(\r\n    departDate,\r\n    dispatch,\r\n    prevDate,\r\n    nextDate\r\n  )\r\n\r\n  if (!searchParsed) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header-wrapper\">\r\n        <Header title={trainNumber + ''} onBack={onBack} />\r\n      </div>\r\n      <Nav\r\n        date={departDate}\r\n        isPrevDisabled={isPrevDisabled}\r\n        isNextDisabled={isNextDisabled}\r\n        prev={prev}\r\n        next={next}\r\n      />\r\n      <div className=\"detail-wrapper\">\r\n        <Detail\r\n          departStation={departStation}\r\n          departTimeStr={departTimeStr}\r\n          departDate={departDate}\r\n          trainNumber={trainNumber}\r\n          durationStr={durationStr}\r\n          arriveStation={arriveStation}\r\n          arriveTimeStr={arriveTimeStr}\r\n          arriveDate={arriveDate}\r\n        >\r\n          <span className=\"left\"></span>\r\n          <span\r\n            className=\"schedule\"\r\n            onClick={() => dispatch(toggleScheduleVisible(!isScheduleVisible))}\r\n          >\r\n            时刻表\r\n          </span>\r\n          <span className=\"right\"></span>\r\n        </Detail>\r\n      </div>\r\n      <TrainContext.Provider\r\n        value={{ trainNumber, departStation, arriveStation, departDate }}\r\n      >\r\n        <Candidate tickets={tickets} />\r\n      </TrainContext.Provider>\r\n      {isScheduleVisible && (\r\n        <div\r\n          className=\"mask\"\r\n          onClick={() => dispatch(toggleScheduleVisible(!isScheduleVisible))}\r\n        >\r\n          <Suspense fallback={<div>loading</div>}>\r\n            <Schedule\r\n              date={departDate}\r\n              trainNumber={trainNumber}\r\n              departStation={departStation}\r\n              arriveStation={arriveStation}\r\n            />\r\n          </Suspense>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  trainNumber,\r\n  departDate,\r\n  arriveDate,\r\n  departStation,\r\n  arriveStation,\r\n  departTimeStr,\r\n  arriveTimeStr,\r\n  durationStr,\r\n  tickets,\r\n  isScheduleVisible,\r\n  searchParsed\r\n}: StoreState) => {\r\n  return {\r\n    trainNumber,\r\n    departDate,\r\n    arriveDate,\r\n    departStation,\r\n    arriveStation,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    durationStr,\r\n    tickets,\r\n    isScheduleVisible,\r\n    searchParsed\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    dispatch,\r\n    fetchInfo: bindActionCreators(fetchTicketInfo, dispatch)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport 'normalize.css'\r\n\r\nimport store from './store/store'\r\nimport './styles/index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}