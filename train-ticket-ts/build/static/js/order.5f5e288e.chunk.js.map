{"version":3,"sources":["common/utils.js","common/Nav.tsx","common/useNav.ts","common/Detail.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","order/store/actions.ts","order/store/reducers.ts","order/store/store.ts","order/components/Ticket.tsx","order/components/Passengers.tsx","order/components/Menu.tsx","order/App.tsx","order/index.tsx","common/Header.tsx"],"names":["timeZero","timestamp","Date","now","target","setHours","setMinutes","setSeconds","setMilliseconds","getTime","Nav","memo","props","date","prev","next","isPrevDisabled","isNextDisabled","currentString","useMemo","d","dayjs","format","locale","className","onClick","classNames","useNav","departDate","dispatch","prevDate","nextDate","useCallback","Detail","departStation","departTimeStr","trainNumber","durationStr","arriveStation","arriveTimeStr","arriveDate","departDateStr","arriveDateStr","children","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","_createForOfIteratorHelper","o","i","F","s","n","length","done","value","e","_e","f","it","err","normalCompletion","didErr","step","_e2","fetchInitial","url","fetch","then","res","json","price","type","payload","time","setArriveTime","setDurationTime","setPrice","setDepartDate","getState","setPassenger","passenger","passengerIdSeed","createAdult","passengers","console","log","keys","alert","id","ticketType","name","licenceNo","seat","createChild","adultFound","gender","birthday","followAdult","removePassenger","filter","updatePassenger","data","removeKeys","newPassengers","assign","forEach","key","setMenuVisible","bool","showMenu","menu","setMenu","hideMenu","showGenderMenu","find","onPress","options","title","active","showFollowAdultMenu","map","adult","showTicketTypeMenu","adultElseFound","state","action","durationTimeStr","seatType","isMenuVisible","searchParsed","createStore","combineReducers","reducers","applyMiddleware","thunk","Ticket","Passenger","followAdultName","isAdult","placeholder","onChange","readOnly","Passengers","nameMap","ret","MenuItem","Menu","show","option","connect","fetchInfo","bindActionCreators","onBack","window","history","back","useEffect","queriesDefault","dStation","aStation","queries","URI","parseQuery","location","search","station","setArriveStation","valueOf","setSeatType","setSearch","toString","passengerCbs","menuCbs","currentMenu","Header","style","display","ReactDOM","render","store","document","getElementById","width","height","points","stroke","strokeWidth","fill"],"mappings":"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","file":"static/js/order.5f5e288e.chunk.js","sourcesContent":["export function timeZero(timestamp = Date.now()) {\r\n  const target = new Date(timestamp)\r\n\r\n  target.setHours(0)\r\n  target.setMinutes(0)\r\n  target.setSeconds(0)\r\n  target.setMilliseconds(0)\r\n\r\n  return target.getTime()\r\n}\r\n","import React, { FC, memo, useMemo } from 'react'\r\nimport classNames from 'classnames'\r\nimport dayjs from 'dayjs'\r\nimport 'dayjs/locale/zh-cn'\r\nimport './styles/Nav.css'\r\nimport { DepartDateProp } from '../query/types'\r\n\r\ninterface NavProps {\r\n  date: DepartDateProp\r\n  prev: () => void\r\n  next: () => void\r\n  isPrevDisabled: boolean\r\n  isNextDisabled: boolean\r\n}\r\n\r\nconst Nav: FC<NavProps> = memo(props => {\r\n  const { date, prev, next, isPrevDisabled, isNextDisabled } = props\r\n  const currentString = useMemo(() => {\r\n    const d = dayjs(date)\r\n    return d.format('M月D日') + d.locale('zh-cn').format('ddd')\r\n  }, [date])\r\n\r\n  return (\r\n    <div className=\"nav\">\r\n      <span\r\n        onClick={prev}\r\n        className={classNames('nav-prev', { 'nav-disabled': isPrevDisabled })}\r\n      >\r\n        前一天\r\n      </span>\r\n      <span className=\"nav-current\">{currentString}</span>\r\n      <span\r\n        onClick={next}\r\n        className={classNames('nav-next', { 'nav-disabled': isNextDisabled })}\r\n      >\r\n        后一天\r\n      </span>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Nav\r\n","import { useCallback } from 'react'\r\nimport { Dispatch } from 'redux'\r\nimport { timeZero } from './utils'\r\nimport { DepartDateProp } from '../query/types'\r\n\r\nexport default function useNav(\r\n  departDate: DepartDateProp,\r\n  dispatch: Dispatch,\r\n  prevDate: any,\r\n  nextDate: any\r\n) {\r\n  const isPrevDisabled = timeZero(departDate) <= timeZero()\r\n  const isNextDisabled =\r\n    timeZero(departDate) - timeZero() > 20 * 24 * 60 * 60 * 1000\r\n\r\n  const prev = useCallback(() => {\r\n    if (isPrevDisabled) return\r\n    dispatch(prevDate())\r\n  }, [dispatch, prevDate, isPrevDisabled])\r\n\r\n  const next = useCallback(() => {\r\n    if (isNextDisabled) return\r\n    dispatch(nextDate())\r\n  }, [dispatch, nextDate, isNextDisabled])\r\n\r\n  return {\r\n    isPrevDisabled,\r\n    isNextDisabled,\r\n    prev,\r\n    next\r\n  }\r\n}\r\n","import React, { FC, memo, useMemo } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport './styles/Detail.css'\r\n\r\nimport {\r\n  StationProp,\r\n  TimeStrProp,\r\n  DateProp,\r\n  TrainNumberProp\r\n} from '../ticket/types'\r\n\r\nfunction format(d: DateProp) {\r\n  const date = dayjs(d)\r\n\r\n  return date.format('MM-DD') + ' ' + date.locale('zh-cn').format('ddd')\r\n}\r\n\r\ninterface DetailProps {\r\n  trainNumber: TrainNumberProp\r\n  departDate: DateProp\r\n  arriveDate: DateProp\r\n  departStation: StationProp\r\n  arriveStation: StationProp\r\n  departTimeStr: TimeStrProp\r\n  durationStr: TimeStrProp\r\n  arriveTimeStr: TimeStrProp\r\n}\r\n\r\nconst Detail: FC<DetailProps> = memo(props => {\r\n  const {\r\n    departStation,\r\n    departTimeStr,\r\n    departDate,\r\n    trainNumber,\r\n    durationStr,\r\n    arriveStation,\r\n    arriveTimeStr,\r\n    arriveDate\r\n  } = props\r\n\r\n  const departDateStr = useMemo(() => format(departDate), [departDate])\r\n  const arriveDateStr = useMemo(() => format(arriveDate), [arriveDate])\r\n\r\n  return (\r\n    <div className=\"detail\">\r\n      <div className=\"content\">\r\n        <div className=\"left\">\r\n          <p className=\"city\">{departStation}</p>\r\n          <p className=\"time\">{departTimeStr}</p>\r\n          <p className=\"date\">{departDateStr}</p>\r\n        </div>\r\n        <div className=\"middle\">\r\n          <p className=\"train-name\">{trainNumber}</p>\r\n          <p className=\"train-mid\">{props.children}</p>\r\n          <p className=\"train-time\">耗时{durationStr}</p>\r\n        </div>\r\n        <div className=\"right\">\r\n          <p className=\"city\">{arriveStation}</p>\r\n          <p className=\"time\">{arriveTimeStr}</p>\r\n          <p className=\"date\">{arriveDateStr}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Detail\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { Dispatch } from 'redux'\r\n\r\nimport {\r\n  TrainNumberProp,\r\n  StationProp,\r\n  DateProp,\r\n  TimeStrProp,\r\n  PriceProp,\r\n  SeatTypeProp,\r\n  VisibleProp,\r\n  PassengerProps,\r\n  MenuProps\r\n} from '../types'\r\n\r\nexport const ACTION_SET_TRAIN_NUMBER = 'SET_TRAIN_NUMBER'\r\nexport const ACTION_SET_DEPART_STATION = 'SET_DEPART_STATION'\r\nexport const ACTION_SET_ARRIVE_STATION = 'SET_ARRIVE_STATION'\r\nexport const ACTION_SET_DEPART_DATE = 'SET_DEPART_DATE'\r\nexport const ACTION_SET_ARRIVE_DATE = 'SET_ARRIVE_DATE'\r\nexport const ACTION_SET_DEPART_TIME = 'SET_DEPART_TIME'\r\nexport const ACTION_SET_ARRIVE_TIME = 'SET_ARRIVE_TIME'\r\nexport const ACTION_SET_DURATION_TIME = 'SET_DURATION_TIME'\r\nexport const ACTION_SET_SEAT_TYPE = 'SET_SEAT_TYPE'\r\nexport const ACTION_SET_SEARCH_PARSED = 'SET_SEARCH_PARSED'\r\nexport const ACTION_SET_PRICE = 'SET_PRICE'\r\nexport const ACTION_SET_PASSENGER = 'SET_PASSENGER'\r\nexport const ACTION_SET_MENU = 'SET_MENU'\r\nexport const ACTION_SET_MENU_VISIBLE = 'SET_MENU_VISIBLE'\r\n\r\nexport function setTrainNumber(num: TrainNumberProp) {\r\n  return {\r\n    type: ACTION_SET_TRAIN_NUMBER,\r\n    payload: num\r\n  }\r\n}\r\n\r\nexport function setDepartStation(station: StationProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_STATION,\r\n    payload: station\r\n  }\r\n}\r\n\r\nexport function setArriveStation(station: StationProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_STATION,\r\n    payload: station\r\n  }\r\n}\r\n\r\nexport function fetchInitial(url: string) {\r\n  return (dispatch: Dispatch) => {\r\n    fetch(url)\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        const {\r\n          departTimeStr,\r\n          arriveTimeStr,\r\n          arriveDate,\r\n          durationStr,\r\n          price\r\n        } = res\r\n        dispatch(setDepartTime(departTimeStr))\r\n        dispatch(setArriveTime(arriveTimeStr))\r\n        dispatch(setArriveDate(arriveDate))\r\n        dispatch(setDurationTime(durationStr))\r\n        dispatch(setPrice(price))\r\n      })\r\n  }\r\n}\r\n\r\nexport function setDepartDate(date: DateProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_DATE,\r\n    payload: date\r\n  }\r\n}\r\n\r\nexport function setArriveDate(date: DateProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_DATE,\r\n    payload: date\r\n  }\r\n}\r\n\r\nexport function setDepartTime(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_DEPART_TIME,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setArriveTime(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_ARRIVE_TIME,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setDurationTime(time: TimeStrProp) {\r\n  return {\r\n    type: ACTION_SET_DURATION_TIME,\r\n    payload: time\r\n  }\r\n}\r\n\r\nexport function setSeatType(type: SeatTypeProp) {\r\n  return {\r\n    type: ACTION_SET_SEAT_TYPE,\r\n    payload: type\r\n  }\r\n}\r\n\r\nexport function setPrice(price: PriceProp) {\r\n  return {\r\n    type: ACTION_SET_PRICE,\r\n    payload: price\r\n  }\r\n}\r\n\r\nexport function prevDate() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { departDate } = getState()\r\n    const prevDate = departDate - 24 * 60 * 60 * 1000\r\n    dispatch(setDepartDate(prevDate))\r\n  }\r\n}\r\n\r\nexport function nextDate() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { departDate } = getState()\r\n    const nextDate = departDate + 24 * 60 * 60 * 1000\r\n    dispatch(setDepartDate(nextDate))\r\n  }\r\n}\r\n\r\nexport function setPassenger(passenger: PassengerProps[]) {\r\n  return {\r\n    type: ACTION_SET_PASSENGER,\r\n    payload: passenger\r\n  }\r\n}\r\n\r\nlet passengerIdSeed = 0\r\n\r\nexport function createAdult() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { passengers } = getState()\r\n    console.log(passengers)\r\n    for (const passenger of passengers) {\r\n      const keys = Object.keys(passenger)\r\n      for (const key of keys) {\r\n        if (!passenger[key]) {\r\n          alert('请补全信息后再添加')\r\n          return\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(\r\n      setPassenger([\r\n        ...passengers,\r\n        {\r\n          id: ++passengerIdSeed,\r\n          ticketType: 'adult',\r\n          name: '',\r\n          licenceNo: '',\r\n          seat: 'Z'\r\n        }\r\n      ])\r\n    )\r\n  }\r\n}\r\n\r\nexport function createChild() {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { passengers } = getState()\r\n\r\n    let adultFound = null\r\n    for (const passenger of passengers) {\r\n      const keys = Object.keys(passenger)\r\n      for (const key of keys) {\r\n        if (!passenger[key]) {\r\n          alert('请补全信息后再添加')\r\n          return\r\n        }\r\n\r\n        if (passenger.ticketType === 'adult') {\r\n          adultFound = passenger.id\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!adultFound) {\r\n      alert('请至少正确添加一个同行成人')\r\n      return\r\n    }\r\n\r\n    dispatch(\r\n      setPassenger([\r\n        ...passengers,\r\n        {\r\n          id: ++passengerIdSeed,\r\n          name: '',\r\n          ticketType: 'child',\r\n          gender: 'male',\r\n          birthday: '',\r\n          followAdult: adultFound,\r\n          seat: 'Z'\r\n        }\r\n      ])\r\n    )\r\n  }\r\n}\r\n\r\nexport function removePassenger(id: number) {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const passengers: PassengerProps[] = getState().passengers\r\n    const newPassengers = passengers.filter(\r\n      passenger => passenger.id !== id && passenger.followAdult !== id\r\n    )\r\n\r\n    dispatch(setPassenger(newPassengers))\r\n  }\r\n}\r\n\r\nexport function updatePassenger(\r\n  id: number,\r\n  data: { [key: string]: string | number },\r\n  removeKeys?: string[]\r\n) {\r\n  return (dispatch: Dispatch, getState: any) => {\r\n    const { passengers } = getState()\r\n\r\n    const newPassengers = [...passengers]\r\n    for (let i in newPassengers) {\r\n      if (passengers[i].id === id) {\r\n        newPassengers[i] = Object.assign({}, passengers[i], data)\r\n\r\n        if (removeKeys) {\r\n          removeKeys.forEach(key => delete newPassengers[i][key])\r\n        }\r\n\r\n        break\r\n      }\r\n    }\r\n\r\n    dispatch(setPassenger(newPassengers))\r\n  }\r\n}\r\n\r\nexport function setMenu(menu: MenuProps) {\r\n  return {\r\n    type: ACTION_SET_MENU,\r\n    payload: menu\r\n  }\r\n}\r\n\r\nexport function setMenuVisible(bool: VisibleProp) {\r\n  return {\r\n    type: ACTION_SET_MENU_VISIBLE,\r\n    payload: bool\r\n  }\r\n}\r\n\r\nexport function showMenu(menu: MenuProps) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch(setMenu(menu))\r\n    dispatch(setMenuVisible(true))\r\n  }\r\n}\r\n\r\nexport function hideMenu() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch(setMenuVisible(false))\r\n  }\r\n}\r\n\r\nexport function showGenderMenu(id: number) {\r\n  return (dispatch: any, getState: any) => {\r\n    const passengers: PassengerProps[] = getState().passengers\r\n\r\n    const passenger = passengers.find(passenger => passenger.id === id)\r\n\r\n    if (!passenger) return\r\n\r\n    dispatch(\r\n      showMenu({\r\n        onPress(gender: string) {\r\n          dispatch(updatePassenger(id, { gender }))\r\n          dispatch(hideMenu())\r\n        },\r\n        options: [\r\n          {\r\n            title: '男',\r\n            value: 'male',\r\n            active: passenger.gender === 'male'\r\n          },\r\n          {\r\n            title: '女',\r\n            value: 'female',\r\n            active: passenger.gender === 'female'\r\n          }\r\n        ]\r\n      })\r\n    )\r\n  }\r\n}\r\n\r\nexport function showFollowAdultMenu(id: number) {\r\n  return (dispatch: any, getState: any) => {\r\n    const passengers: PassengerProps[] = getState().passengers\r\n\r\n    const passenger = passengers.find(passenger => passenger.id === id)\r\n\r\n    if (!passenger) return\r\n\r\n    dispatch(\r\n      showMenu({\r\n        onPress(followAdult) {\r\n          dispatch(updatePassenger(id, { followAdult }))\r\n          dispatch(hideMenu())\r\n        },\r\n        options: passengers\r\n          .filter(passenger => passenger.ticketType === 'adult')\r\n          .map(adult => {\r\n            return {\r\n              title: adult.name,\r\n              value: adult.id,\r\n              active: adult.id === passenger.followAdult\r\n            }\r\n          })\r\n      })\r\n    )\r\n  }\r\n}\r\n\r\nexport function showTicketTypeMenu(id: number) {\r\n  return (dispatch: any, getState: any) => {\r\n    const passengers: PassengerProps[] = getState().passengers\r\n    const passenger = passengers.find(passenger => passenger.id === id)\r\n\r\n    if (!passenger) return\r\n\r\n    dispatch(\r\n      showMenu({\r\n        onPress(ticketType) {\r\n          if ('adult' === ticketType) {\r\n            dispatch(\r\n              updatePassenger(id, { ticketType, licenceNo: '' }, [\r\n                'gender',\r\n                'followAdult',\r\n                'birthday'\r\n              ])\r\n            )\r\n          } else {\r\n            const adultElseFound = passengers.find(\r\n              passenger =>\r\n                passenger.id !== id && passenger.ticketType === 'adult'\r\n            )\r\n            if (adultElseFound) {\r\n              dispatch(\r\n                updatePassenger(\r\n                  id,\r\n                  {\r\n                    ticketType,\r\n                    gender: '',\r\n                    followAdult: adultElseFound.id,\r\n                    birthday: ''\r\n                  },\r\n                  ['licenceNo']\r\n                )\r\n              )\r\n            } else {\r\n              alert('没有其他成人乘客')\r\n            }\r\n          }\r\n\r\n          dispatch(setMenuVisible(false))\r\n        },\r\n        options: [\r\n          {\r\n            title: '成人票',\r\n            value: 'adult',\r\n            active: passenger.ticketType === 'adult'\r\n          },\r\n          {\r\n            title: '儿童票',\r\n            value: 'child',\r\n            active: passenger.ticketType === 'child'\r\n          }\r\n        ]\r\n      })\r\n    )\r\n  }\r\n}\r\n\r\nexport function setSearchParsed(bool: VisibleProp) {\r\n  return {\r\n    type: ACTION_SET_SEARCH_PARSED,\r\n    payload: bool\r\n  }\r\n}\r\n","import {\r\n  ACTION_SET_TRAIN_NUMBER,\r\n  ACTION_SET_DEPART_STATION,\r\n  ACTION_SET_ARRIVE_STATION,\r\n  ACTION_SET_DEPART_DATE,\r\n  ACTION_SET_ARRIVE_DATE,\r\n  ACTION_SET_DEPART_TIME,\r\n  ACTION_SET_ARRIVE_TIME,\r\n  ACTION_SET_DURATION_TIME,\r\n  ACTION_SET_SEAT_TYPE,\r\n  ACTION_SET_SEARCH_PARSED,\r\n  ACTION_SET_PRICE,\r\n  ACTION_SET_PASSENGER,\r\n  ACTION_SET_MENU,\r\n  ACTION_SET_MENU_VISIBLE\r\n} from './actions'\r\n\r\nimport {\r\n  ActionProps,\r\n  TrainNumberProp,\r\n  StationProp,\r\n  DateProp,\r\n  TimeStrProp,\r\n  PriceProp,\r\n  SeatTypeProp,\r\n  VisibleProp,\r\n  PassengerProps,\r\n  MenuProps\r\n} from '../types'\r\n\r\nexport default {\r\n  trainNumber(\r\n    state: TrainNumberProp = null,\r\n    action: ActionProps<TrainNumberProp>\r\n  ) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_TRAIN_NUMBER:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  departStation(state: StationProp = null, action: ActionProps<StationProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  arriveStation(state: StationProp = null, action: ActionProps<StationProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_STATION:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  departDate(state: DateProp = Date.now(), action: ActionProps<DateProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  arriveDate(state: DateProp = Date.now(), action: ActionProps<DateProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_DATE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  departTimeStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DEPART_TIME:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n  arriveTimeStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_ARRIVE_TIME:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  durationTimeStr(state: TimeStrProp = null, action: ActionProps<TimeStrProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_DURATION_TIME:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  seatType(state: SeatTypeProp = null, action: ActionProps<SeatTypeProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_SEAT_TYPE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  price(state: PriceProp = null, action: ActionProps<PriceProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_PRICE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  passengers(\r\n    state: PassengerProps[] = [],\r\n    action: ActionProps<PassengerProps[]>\r\n  ) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_PASSENGER:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  menu(state: MenuProps = null, action: ActionProps<MenuProps>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_MENU:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  isMenuVisible(state: VisibleProp = false, action: ActionProps<VisibleProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_MENU_VISIBLE:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  },\r\n\r\n  searchParsed(state: VisibleProp = false, action: ActionProps<VisibleProp>) {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n      case ACTION_SET_SEARCH_PARSED:\r\n        return payload\r\n      default:\r\n    }\r\n    return state\r\n  }\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\n\r\nimport reducers from './reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nexport default createStore(\r\n  combineReducers(reducers),\r\n  {\r\n    trainNumber: null,\r\n    departStation: null,\r\n    arriveStation: null,\r\n    departDate: Date.now(),\r\n    arriveDate: Date.now(),\r\n    departTimeStr: null,\r\n    arriveTimeStr: null,\r\n    durationTimeStr: null,\r\n    seatType: null,\r\n    price: null,\r\n    passengers: [],\r\n    menu: null,\r\n    isMenuVisible: false,\r\n    searchParsed: false\r\n  },\r\n  applyMiddleware(thunk)\r\n)\r\n","import React, { FC, memo } from 'react'\r\n\r\nimport '../styles/Ticket.css'\r\nimport { PriceProp, SeatTypeProp } from '../types'\r\ninterface TicketProps {\r\n  price: PriceProp\r\n  type: SeatTypeProp\r\n}\r\n\r\nconst Ticket: FC<TicketProps> = memo(props => {\r\n  const { price, type } = props\r\n\r\n  return (\r\n    <div className=\"ticket\">\r\n      <p>\r\n        <span className=\"ticket-type\">{type}</span>\r\n        <span className=\"ticket-price\">{price}</span>\r\n      </p>\r\n      <div className=\"label\">坐席</div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Ticket\r\n","import React, { FC, memo, useMemo } from 'react'\r\nimport { Dispatch } from 'redux'\r\n\r\nimport '../styles/Passengers.css'\r\nimport {\r\n  PassengerProps,\r\n  DispatchMiddleProp,\r\n  DispatchMiddleParamProp\r\n} from '../types'\r\n\r\ntype UpdateProps = (\r\n  id: number,\r\n  data: { [key: string]: string | number },\r\n  removeKeys?: string[]\r\n) => (dispatch: Dispatch, getState?: any) => void\r\n\r\ninterface PassengerCommonProps {\r\n  removePassenger: DispatchMiddleParamProp<number>\r\n  updatePassenger: UpdateProps\r\n  showGenderMenu: DispatchMiddleParamProp<number>\r\n  showTicketTypeMenu: DispatchMiddleParamProp<number>\r\n  showFollowAdultMenu: DispatchMiddleParamProp<number>\r\n}\r\n\r\ninterface PassengersProps extends PassengerCommonProps {\r\n  passengers: PassengerProps[]\r\n  createAdult: DispatchMiddleProp\r\n  createChild: DispatchMiddleProp\r\n}\r\n\r\ninterface PassengerComponentProps extends PassengerCommonProps {\r\n  id: number\r\n  name: string\r\n  ticketType: string\r\n  followAdultName?: string\r\n  licenceNo?: string\r\n  gender?: string\r\n  birthday?: string\r\n}\r\n\r\nconst Passenger: FC<PassengerComponentProps> = props => {\r\n  const {\r\n    id,\r\n    name,\r\n    ticketType,\r\n    followAdultName,\r\n    licenceNo,\r\n    gender,\r\n    birthday,\r\n    removePassenger,\r\n    updatePassenger,\r\n    showGenderMenu,\r\n    showTicketTypeMenu,\r\n    showFollowAdultMenu\r\n  } = props\r\n\r\n  const isAdult = ticketType === 'adult'\r\n  return (\r\n    <li className=\"passenger\">\r\n      <i\r\n        className=\"delete\"\r\n        onClick={() => {\r\n          removePassenger(id)\r\n        }}\r\n      >\r\n        -\r\n      </i>\r\n      <ol className=\"items\">\r\n        <li className=\"item\">\r\n          <label className=\"label name\">姓名</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"input name\"\r\n            placeholder=\"乘客姓名\"\r\n            value={name}\r\n            onChange={e => updatePassenger(id, { name: e.target.value })}\r\n          />\r\n          <label className=\"ticket-type\" onClick={() => showTicketTypeMenu(id)}>\r\n            {isAdult ? '成人票' : '儿童票'}\r\n          </label>\r\n        </li>\r\n        {isAdult && (\r\n          <li className=\"item\">\r\n            <label className=\"label licenceNo\">身份证</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"input licenceNo\"\r\n              placeholder=\"证件号码\"\r\n              value={licenceNo}\r\n              onChange={e => updatePassenger(id, { licenceNo: e.target.value })}\r\n            />\r\n          </li>\r\n        )}\r\n        {!isAdult && (\r\n          <li className=\"item arrow\">\r\n            <label className=\"label gender\">性别</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"input gender\"\r\n              placeholder=\"请选择\"\r\n              value={gender === 'male' ? '男' : '女'}\r\n              readOnly\r\n              onClick={() => showGenderMenu(id)}\r\n            />\r\n          </li>\r\n        )}\r\n        {!isAdult && (\r\n          <li className=\"item\">\r\n            <label className=\"label birthday\">出生日期</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"input birthday\"\r\n              placeholder=\"如 19951015\"\r\n              value={birthday}\r\n              onChange={e => updatePassenger(id, { birthday: e.target.value })}\r\n            />\r\n          </li>\r\n        )}\r\n        {!isAdult && (\r\n          <li className=\"item arrow\">\r\n            <label className=\"label followAdult\">同行成人</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"input followAdult\"\r\n              placeholder=\"请选择\"\r\n              value={followAdultName}\r\n              readOnly\r\n              onClick={() => showFollowAdultMenu(id)}\r\n            />\r\n          </li>\r\n        )}\r\n      </ol>\r\n    </li>\r\n  )\r\n}\r\n\r\nconst Passengers: FC<PassengersProps> = memo(props => {\r\n  const {\r\n    passengers,\r\n    createAdult,\r\n    createChild,\r\n    removePassenger,\r\n    updatePassenger,\r\n    showGenderMenu,\r\n    showTicketTypeMenu,\r\n    showFollowAdultMenu\r\n  } = props\r\n\r\n  const nameMap = useMemo(() => {\r\n    const ret: { [key: number]: string } = {}\r\n\r\n    for (const passenger of passengers) {\r\n      ret[passenger.id] = passenger.name\r\n    }\r\n\r\n    return ret\r\n  }, [passengers])\r\n\r\n  return (\r\n    <div className=\"passengers\">\r\n      <ul>\r\n        {passengers.map(passenger => (\r\n          <Passenger\r\n            {...passenger}\r\n            key={passenger.id}\r\n            followAdultName={\r\n              (passenger.followAdult && nameMap[passenger.followAdult]) || ''\r\n            }\r\n            removePassenger={removePassenger}\r\n            updatePassenger={updatePassenger}\r\n            showGenderMenu={showGenderMenu}\r\n            showTicketTypeMenu={showTicketTypeMenu}\r\n            showFollowAdultMenu={showFollowAdultMenu}\r\n          />\r\n        ))}\r\n      </ul>\r\n      <section className=\"add\">\r\n        <div className=\"adult\" onClick={() => createAdult()}>\r\n          添加成人\r\n        </div>\r\n        <div className=\"child\" onClick={() => createChild()}>\r\n          添加儿童\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Passengers\r\n","import React, { FC, memo } from 'react'\r\nimport classNames from 'classnames'\r\n\r\nimport '../styles/Menu.css'\r\nimport { VisibleProp, OptionProps, DispatchMiddleProp } from '../types'\r\n\r\ntype OnPressProp = (param: string | number) => void\r\n\r\ninterface MenuProps {\r\n  show: VisibleProp\r\n  onPress: OnPressProp\r\n  options: OptionProps[]\r\n  hideMenu: DispatchMiddleProp\r\n}\r\n\r\ninterface MenuItemProps extends OptionProps {\r\n  onPress: OnPressProp\r\n}\r\n\r\nconst MenuItem: FC<MenuItemProps> = props => {\r\n  const { title, value, active, onPress } = props\r\n\r\n  return (\r\n    <li className={classNames({ active })} onClick={() => onPress(value)}>\r\n      {title}\r\n    </li>\r\n  )\r\n}\r\n\r\nconst Menu: FC<MenuProps> = memo(props => {\r\n  const { show, onPress, options, hideMenu } = props\r\n\r\n  return (\r\n    <div>\r\n      {show && <div className=\"menu-mask\" onClick={() => hideMenu()}></div>}\r\n      <div className={classNames('menu', { show })}>\r\n        <div className=\"menu-title\"></div>\r\n        <ul>\r\n          {options &&\r\n            options.map(option => (\r\n              <MenuItem {...option} key={option.value} onPress={onPress} />\r\n            ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Menu\r\n","import React, { FC, useCallback, useEffect, useMemo } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators, Dispatch } from 'redux'\r\n\r\nimport URI from 'urijs'\r\nimport dayjs from 'dayjs'\r\n\r\nimport './styles/App.css'\r\nimport Header from '../common/Header'\r\nimport Nav from '../common/Nav'\r\nimport Detail from '../common/Detail'\r\nimport Ticket from './components/Ticket'\r\nimport Passengers from './components/Passengers'\r\nimport Menu from './components/Menu'\r\n\r\nimport useNav from '../common/useNav'\r\n\r\nimport {\r\n  TrainNumberProp,\r\n  DateProp,\r\n  StationProp,\r\n  TimeStrProp,\r\n  PriceProp,\r\n  SeatTypeProp,\r\n  PassengerProps,\r\n  VisibleProp,\r\n  MenuProps,\r\n  StoreState\r\n} from './types'\r\n\r\nimport {\r\n  setTrainNumber,\r\n  setDepartStation,\r\n  setArriveStation,\r\n  setDepartDate,\r\n  setSeatType,\r\n  fetchInitial,\r\n  setSearchParsed,\r\n  prevDate,\r\n  nextDate,\r\n  createAdult,\r\n  createChild,\r\n  removePassenger,\r\n  updatePassenger,\r\n  showGenderMenu,\r\n  showTicketTypeMenu,\r\n  showFollowAdultMenu,\r\n  hideMenu\r\n} from './store/actions'\r\n\r\ninterface QueryProps {\r\n  trainNumber: TrainNumberProp\r\n  dStation: StationProp\r\n  aStation: StationProp\r\n  type: SeatTypeProp\r\n  date: DateProp\r\n}\r\n\r\ninterface AppProps {\r\n  trainNumber: TrainNumberProp\r\n  departDate: DateProp\r\n  arriveDate: DateProp\r\n  departStation: StationProp\r\n  arriveStation: StationProp\r\n  departTimeStr: TimeStrProp\r\n  arriveTimeStr: TimeStrProp\r\n  durationTimeStr: TimeStrProp\r\n  price: PriceProp\r\n  seatType: SeatTypeProp\r\n  passengers: PassengerProps[]\r\n  menu: MenuProps\r\n  isMenuVisible: VisibleProp\r\n  searchParsed: VisibleProp\r\n\r\n  fetchInfo: (url: string) => (dispatch: Dispatch, getState?: any) => void\r\n  dispatch: Dispatch\r\n}\r\n\r\nconst App: FC<AppProps> = props => {\r\n  const {\r\n    trainNumber,\r\n    departDate,\r\n    arriveDate,\r\n    departStation,\r\n    arriveStation,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    durationTimeStr,\r\n    price,\r\n    seatType,\r\n    passengers,\r\n    menu,\r\n    isMenuVisible,\r\n    searchParsed,\r\n\r\n    fetchInfo,\r\n    dispatch\r\n  } = props\r\n\r\n  const onBack = useCallback(() => window.history.back(), [])\r\n\r\n  const { isPrevDisabled, isNextDisabled, prev, next } = useNav(\r\n    departDate,\r\n    dispatch,\r\n    prevDate,\r\n    nextDate\r\n  )\r\n\r\n  useEffect(() => {\r\n    const queriesDefault = {\r\n      trainNumber: null,\r\n      dStation: null,\r\n      aStation: null,\r\n      type: null,\r\n      date: Date.now()\r\n    }\r\n    const queries: QueryProps = Object.assign(\r\n      queriesDefault,\r\n      URI.parseQuery(window.location.search)\r\n    )\r\n    const { trainNumber, dStation, aStation, type, date } = queries\r\n    dispatch(setTrainNumber(trainNumber))\r\n    dispatch(setDepartStation(dStation))\r\n    dispatch(setArriveStation(aStation))\r\n    dispatch(setDepartDate(dayjs(date).valueOf()))\r\n    dispatch(setSeatType(type))\r\n\r\n    dispatch(setSearchParsed(true))\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    if (!searchParsed) return\r\n\r\n    const url = new URI(\r\n      'http://easy-mock.liuup.com/mock/5efef790339f163501d502b7/api/order'\r\n    )\r\n      .setSearch('trainNumber', trainNumber + '')\r\n      .setSearch('date', dayjs(departDate).format('YYYY-MM-DD'))\r\n      .toString()\r\n\r\n    fetchInfo(url)\r\n  }, [searchParsed, trainNumber, departDate, fetchInfo])\r\n\r\n  const passengerCbs = useMemo(() => {\r\n    return bindActionCreators(\r\n      {\r\n        createAdult,\r\n        createChild,\r\n        removePassenger,\r\n        updatePassenger,\r\n        showGenderMenu,\r\n        showTicketTypeMenu,\r\n        showFollowAdultMenu\r\n      },\r\n      dispatch\r\n    )\r\n  }, [dispatch])\r\n\r\n  const menuCbs = useMemo(() => {\r\n    return bindActionCreators(\r\n      {\r\n        hideMenu\r\n      },\r\n      dispatch\r\n    )\r\n  }, [dispatch])\r\n\r\n  const currentMenu = useMemo(() => {\r\n    if (menu && Object.keys(menu).length) {\r\n      return menu\r\n    } else {\r\n      return {\r\n        options: [],\r\n        onPress: () => {}\r\n      }\r\n    }\r\n  }, [menu])\r\n\r\n  if (!searchParsed) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"order\">\r\n      <div className=\"header-wrapper\">\r\n        <Header title={trainNumber + ''} onBack={onBack} />\r\n      </div>\r\n      <Nav\r\n        date={departDate}\r\n        isPrevDisabled={isPrevDisabled}\r\n        isNextDisabled={isNextDisabled}\r\n        prev={prev}\r\n        next={next}\r\n      />\r\n      <div className=\"detail-wrapper\">\r\n        <Detail\r\n          departStation={departStation}\r\n          departTimeStr={departTimeStr}\r\n          departDate={departDate}\r\n          trainNumber={trainNumber}\r\n          durationStr={durationTimeStr}\r\n          arriveStation={arriveStation}\r\n          arriveTimeStr={arriveTimeStr}\r\n          arriveDate={arriveDate}\r\n        >\r\n          <span style={{ display: 'block' }} className=\"train-icon\"></span>\r\n        </Detail>\r\n      </div>\r\n      <Ticket price={price} type={seatType} />\r\n      <Passengers passengers={passengers} {...passengerCbs} />\r\n      <Menu show={isMenuVisible} {...menuCbs} {...currentMenu} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapToStateProps = ({\r\n  trainNumber,\r\n  departDate,\r\n  arriveDate,\r\n  departStation,\r\n  arriveStation,\r\n  departTimeStr,\r\n  arriveTimeStr,\r\n  durationTimeStr,\r\n  price,\r\n  seatType,\r\n  passengers,\r\n  menu,\r\n  isMenuVisible,\r\n  searchParsed\r\n}: StoreState) => {\r\n  return {\r\n    trainNumber,\r\n    departDate,\r\n    arriveDate,\r\n    departStation,\r\n    arriveStation,\r\n    departTimeStr,\r\n    arriveTimeStr,\r\n    durationTimeStr,\r\n    price,\r\n    seatType,\r\n    passengers,\r\n    menu,\r\n    isMenuVisible,\r\n    searchParsed\r\n  }\r\n}\r\n\r\nconst mapToDispatchProps = (dispatch: Dispatch) => {\r\n  return {\r\n    dispatch,\r\n    fetchInfo: bindActionCreators(fetchInitial, dispatch)\r\n  }\r\n}\r\n\r\nexport default connect(mapToStateProps, mapToDispatchProps)(App)\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport 'normalize.css'\r\n\r\nimport store from './store/store'\r\nimport './styles/index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n","import React, { FC, memo } from 'react'\r\nimport './styles/Header.css'\r\n\r\ninterface HeaderProps {\r\n  onBack: () => void\r\n  title: string\r\n}\r\nconst Header: FC<HeaderProps> = memo(props => {\r\n  const { onBack, title } = props\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-back\" onClick={onBack}>\r\n        <svg width=\"42\" height=\"42\">\r\n          <polyline\r\n            points=\"25,13 16,21 25,29\"\r\n            stroke=\"#fff\"\r\n            strokeWidth=\"2\"\r\n            fill=\"none\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <h1 className=\"header-title\">{title}</h1>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Header\r\n"],"sourceRoot":""}